<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- This manual is for Flycheck, the on-the-fly syntax checker for GNU Emacs.

Copyright (C) 2013 Sebastian Wiesner

Permission is granted to copy, distribute and/or modify this document
  under the terms of the GNU Free Documentation License, Version 1.3 or
  any later version published by the Free Software Foundation; with no
  Invariant Sections, no Front-Cover Texts, and no Back-Cover Texts.  A
  copy of the license is included in the section entitled "GNU Free
  Documentation License". -->
<!-- Created by GNU Texinfo 5.1, http://www.gnu.org/software/texinfo/ -->
<head>
<title>The Flycheck manual: Extending</title>

<meta name="description" content="The Flycheck manual: Extending">
<meta name="keywords" content="The Flycheck manual: Extending">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link href="index.html#Top" rel="start" title="Top">
<link href="Function-and-Variable-Index.html#Function-and-Variable-Index" rel="index" title="Function and Variable Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="index.html#Top" rel="up" title="Top">
<link href="API.html#API" rel="next" title="API">
<link href="Usage.html#Mode-line" rel="previous" title="Mode line">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.smallquotation {font-size: smaller}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.indentedblock {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
div.smalldisplay {margin-left: 3.2em}
div.smallexample {margin-left: 3.2em}
div.smallindentedblock {margin-left: 3.2em; font-size: smaller}
div.smalllisp {margin-left: 3.2em}
kbd {font-style:oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
pre.smalldisplay {font-family: inherit; font-size: smaller}
pre.smallexample {font-size: smaller}
pre.smallformat {font-family: inherit; font-size: smaller}
pre.smalllisp {font-size: smaller}
span.nocodebreak {white-space:nowrap}
span.nolinebreak {white-space:nowrap}
span.roman {font-family:serif; font-weight:normal}
span.sansserif {font-family:sans-serif; font-weight:normal}
ul.no-bullet {list-style: none}
-->
</style>
<link rel="stylesheet" type="text/css" href="flycheck.css">


</head>

<body lang="en" bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#800080" alink="#FF0000">
<a name="Extending"></a>
<div class="header">
<p>
Next: <a href="API.html#API" accesskey="n" rel="next">API</a>, Previous: <a href="Usage.html#Usage" accesskey="p" rel="previous">Usage</a>, Up: <a href="index.html#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Function-and-Variable-Index.html#Function-and-Variable-Index" title="Index" rel="index">Index</a>]</p>
</div>
<a name="Extending-1"></a>
<h2 class="chapter">3 Extending</h2>

<a href="https://github.com/lunaryorn/flycheck"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_white_ffffff.png" alt="Fork me on GitHub"></a>
<p>Flycheck is extensible with new syntax checkers.  This chapter explains
how to do so, and provides examples for common use cases.
</p>
<p>If you implement new syntax checkers, please consider <b>contributing</b>
these.  See <a href="Contribution.html#Contributing-syntax-checkers">Contributing syntax checkers</a>, for more information.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top">&bull; <a href="#Declaration" accesskey="1">Declaration</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How to declare syntax checkers
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Error-parsers" accesskey="2">Error parsers</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Built-in error parsers
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Option-filters" accesskey="3">Option filters</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Built-in option filters
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Examples" accesskey="4">Examples</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Examples on how to declare syntax checkers
</td></tr>
</table>

<hr>
<a name="Declaration"></a>
<div class="header">
<p>
Next: <a href="#Error-parsers" accesskey="n" rel="next">Error parsers</a>, Previous: <a href="#Extending" accesskey="p" rel="previous">Extending</a>, Up: <a href="#Extending" accesskey="u" rel="up">Extending</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Function-and-Variable-Index.html#Function-and-Variable-Index" title="Index" rel="index">Index</a>]</p>
</div>
<a name="Declaration-of-syntax-checkers"></a>
<h3 class="section">3.1 Declaration of syntax checkers</h3>

<p>Checkers are declared with <code>flycheck-declare-checker</code>:
</p>
<dl>
<dt><a name="index-flycheck_002ddeclare_002dchecker"></a>Macro: <strong>flycheck-declare-checker</strong> <em>symbol docstring &amp;rest properties</em></dt>
<dd><p>Declare SYMBOL as new syntax checker with PROPERTIES.
</p>
<p>DOCSTRING provides documentation for the syntax checker.
</p>
<p>The PROPERTIES specify the new syntax checker:
</p>
<dl compact="compact">
<dt><code>:command '(<var>executable</var> <var>arguments</var>...)</code></dt>
<dd><p>A list providing the command to execute.  The command consists of an
<var>executable</var> specified as string in the <code>car</code>, and the
<var>arguments</var> for this executable in the <code>cdr</code>.  See <a href="http://www.gnu.org/software/emacs/manual/html_node/elisp/List-elements.html#List-elements">(elisp)List
elements</a>, for more information about the elements of a list.
</p>
<p>The <var>executable</var> is checked for existence with
<code>executable-find</code> before executing the syntax checker.
</p>
<p>In <var>arguments</var>, various special symbols are substituted before
executing the syntax checker:
</p>
<dl compact="compact">
<dt><code>source</code></dt>
<dt><code>source-inplace</code></dt>
<dd><p>These symbols are substituted with the file to check.  This file is a
temporary file with the contents of the buffer.  With <code>source</code> the
copy is created in the temporary directory of the system.  This is
<em>recommended</em>.
</p>
<p>With <code>source-inplace</code> the temporary files is created in the same
directory as the buffer&rsquo;s file.  Use this, if the syntax check needs
other files from the source directory.  If the buffer has no
<code>buffer-file-name</code>, <code>source-inplace</code> is the same as
<code>source</code>.
</p>
</dd>
<dt><code>source-original</code></dt>
<dd><p>This symbol is substituted with <code>buffer-file-name</code>, or an empty
string, if the buffer has no file name.  Note that if the buffer is
modified, the content of the file is <b>not up to date</b> with the actual
content of the buffer.  Hence do <b>not</b> use this as primary input to a
syntax checker!
</p>
<p>See the declaration of the <code>emacs-lisp-checkdoc</code> syntax checker for
an application of this symbol.
</p>
</dd>
<dt><code>temporary-directory</code></dt>
<dd><p>This symbol is substituted with the path of an existing temporary
directory, which is unique on each execution of the syntax checker.
</p>
<p>Use this symbol if you need to move files created by a syntax checker
out of the way.
</p>
</dd>
<dt><code>(config-file <var>option</var> <var>variable</var>)</code></dt>
<dd><p>This cell is substituted with a configuration file for the syntax
checker.  <var>option</var> is a string containing the option that specifies
a configuration file to the syntax checker tool.
</p>
<p><var>variable</var> is a symbol referring to a variable from which to obtain
the name or path of the configuration file.  See <a href="Usage.html#Configuration">Configuration</a>, for
more information about syntax checker configuration.  Define this
variable with <code>flycheck-def-config-file-var</code>.
</p>
<p>If the configuration file is found according to the rules documented in
<a href="Usage.html#Configuration">Configuration</a>, the cell is substituted with the <var>option</var> and
the absolute path to the configuration file as string.  Otherwise the
cell is simply dropped from the arguments of the syntax checker.
</p>
<p>If <var>option</var> ends with a <code>=</code> character, <var>option</var> and the
absolute path to the configuration file are concatenated and given as a
single argument to the syntax checker.  Otherwise, <var>option</var> and the
configuration file path are given as two separate arguments.
</p>
</dd>
<dt><code>(option <var>option</var> <var>variable</var> [<var>filters</var>])</code></dt>
<dd><p>This cell is substituted with the value of <var>variable</var>.  <var>option</var>
is a string containing the option for with to specify the value.
<var>filter</var> is an optional function to be applied to the value of
<var>variable</var> before substitution.  See <a href="#Option-filters">Option filters</a>, for a list
of built-in option filters.
</p>
<p><var>variable</var> is a symbol referring to a variable whose value to use.
See <a href="Usage.html#Configuration">Configuration</a>, for more information about syntax checker
configuration.  Define this variable with
<code>flycheck-def-option-var</code>.
</p>
<p>If <var>variable</var> is not <var>nil</var> after applying <var>filter</var>, the cell
is substituted with the <var>option</var> and the value of <var>variable</var>
after applying <var>filter</var>.  Otherwise the cell is simply dropped from
the arguments of the syntax checker.
</p>
<p>An <var>option</var> ending with a <code>=</code> character is treated like in a
<code>config-file</code> cell.
</p>
</dd>
<dt><code>(eval <var>form</var>)</code></dt>
<dd><p>This cell is substituted with a result of evaluating <var>form</var>.
<var>form</var> must either return a string or a list of strings, or
<code>nil</code> to indicate that nothing should be substituted for
<var>cell</var>.  In case of other return values an error is signaled.
<em>No</em> further substitutions are performed, neither in <var>form</var>
before it is evaluated, nor in the result of evaluating FORM.
</p></dd>
</dl>

<p>This property is <b>mandatory</b>.
</p>
</dd>
<dt><code>:error-parser '<var>parser</var></code></dt>
<dd><p>An error parser to use for parsing the output of the syntax checker.
</p>
<p>The <var>parser</var> is a function symbol.  See <a href="#Error-parsers">Error parsers</a>, for more
information about error parsers, including a list of built-in error
parsers.
</p>
<p>Using a error parser is preferred if a syntax checker provides a
structured output format like XML or JSON.  If possible, re-use one of
the built-in error parsers listed in <a href="#Error-parsers">Error parsers</a>
</p>
<p>May not be specified together with <code>:error-patterns</code>.
</p>
</dd>
<dt><code>:error-patterns '((<var>regexp</var> <var>level</var>)...)</code></dt>
<dd><p>A list of one or more error patterns to parse the output of
<code>:command</code>.
</p>
<p>The <var>regexp</var> is a regular expression matching a single error or
warning.  The <var>level</var> is either <code>error</code> or <code>warning</code> and
classifies the severity of the matched error message.
</p>
<p>Do <b>not</b> use error patterns if you can use an error parser.
</p>
<p>The <var>regexp</var> may provide the following match groups:
</p>
<dl compact="compact">
<dt><em>Group 1</em></dt>
<dd><p>The file name.
</p></dd>
<dt><em>Group 2</em></dt>
<dd><p>The line number.
</p></dd>
<dt><em>Group 3</em></dt>
<dd><p>The column number.
</p></dd>
<dt><em>Group 4</em></dt>
<dd><p>The error text.
</p></dd>
</dl>

<p>Each of these groups is optional, however error messages without line
numbers will be ignored.  Use <b>explicitly numbered groups</b> to make
sure that the group numbering is correct.  See <a href="http://www.gnu.org/software/emacs/manual/html_node/elisp/Regexp-Backslash.html#Regexp-Backslash">(elisp)Regexp Backslash</a>, for more information about regular expression groups.
</p>
<p>The patterns are applied in the order of declaration to the whole output
of the syntax checker.  Output already matched by a pattern will not be
matched by subsequent patterns.  In other words, the first pattern wins.
</p>
<p>May not be specified together with <code>:error-parser</code>.
</p>
</dd>
<dt><code>:modes '<var>major-mode</var></code></dt>
<dt><code>:modes '(<var>major-mode</var>...)</code></dt>
<dd><p>A single <var>major-mode</var>, or a list thereof.
</p>
<p><var>major-mode</var> is a symbol referring to a major mode.  If given the
syntax checker will only be used in buffers with any of the given major
modes.
</p>
</dd>
<dt><code>:predicate <var>form</var></code></dt>
<dd><p>A predicate that determines whether the syntax checker may be used.
</p>
<p><var>form</var> is a quoted Emacs Lisp form.  It is evaluated before each
syntax check to determine whether the syntax checker may be used for the
current buffer.  If <var>form</var> evaluates to nil, the syntax checker is
not used.
</p>
<p>If <var>:modes</var> is given, <var>form</var> is only evaluated if the major mode
matches.  Otherwise the syntax checker is not used.
</p>
</dd>
<dt><code>:next-checker '(<var>item</var>...)</code></dt>
<dd><p>A list of syntax checker to run after this syntax checker.
</p>
<p>Each <var>item</var> is either a single syntax checker symbol, or a cons cell
<code>(<var>predicate</var> . <var>checker</var>)</code>.  Each <var>item</var> is tried on
the order of declaration.
</p>
<p>If the <var>item</var> is a syntax checker symbol, determine whether it is
usable <b>and</b> registered (i.e. contained in <code>flycheck-checkers</code>).
If so start a new syntax check with that syntax checker, and merged its
results with the results of this syntax checker.  If not, try the next
<var>item</var>.
</p>
<p>If <var>item</var> is a cons cell, <var>predicate</var> specifies whether to run
the <var>checker</var> depending on the results of this syntax checker:
</p>
<dl compact="compact">
<dt><code>no-errors</code></dt>
<dd><p>The <var>checker</var> is only used if this syntax checker resulted in no
errors at all.
</p></dd>
<dt><code>warnings-only</code></dt>
<dd><p>The <var>checker</var> is only used if this syntax checker did not result in
error messages of severity <code>error</code>.
</p></dd>
</dl>

<p>If the predicate matches, and <var>checker</var> is usable and registered,
start a new syntax checker with <var>checker</var> and merged its results
with the results of this syntax checker.  If not, try the next
<var>item</var>.
</p>
<p>If there is no further <var>item</var>, finish the syntax check.
</p></dd>
</dl>

<p>At least on of <code>:modes</code> and <code>:predicate</code> must be present.  If
both are present, both must match for the syntax checker to be used.
</p>
<p>Either <code>:error-patterns</code> or <code>:error-parser</code> must be present.
If both are present, an error is signaled.
</p></dd></dl>

<p>A syntax checker declared with <code>flycheck-declare-checker</code> is
already suitable for manual checker selection with
<code>flycheck-select-checker</code>.  For automatic selection the syntax
checker must be registered by adding it to <code>flycheck-checkers</code>.
See <a href="Usage.html#Selection">Selection</a>.
</p>
<dl>
<dt><a name="index-flycheck_002ddef_002dconfig_002dfile_002dvar"></a>Macro: <strong>flycheck-def-config-file-var</strong> <em><var>symbol</var> <var>checker</var>   &amp;optional <var>filename</var></em></dt>
<dd><p>Define <var>symbol</var> as configuration file variable for a syntax
<var>checker</var>, with a default value of <var>filename</var>.
</p>
<p><var>symbol</var> is declared as customizable, buffer-local variable using
<code>defcustom</code>, to provide a configuration file for the given syntax
<var>checker</var>.  The variable has the customization type <code>string</code>,
and gets a comprehensive docstring, including a reference to
<var>checker</var>.
</p>
<p><var>filename</var> is used as initial value for the variable.  If omitted,
the initial value is nil.
</p>
<p>Use this macro together with the <code>config-file</code> cell in the command
of a syntax checker.
</p></dd></dl>

<dl>
<dt><a name="index-flycheck_002ddef_002doption_002dvar"></a>Macro: <strong>flycheck-def-option-var</strong> <em><var>symbol</var> <var>initial-value</var>   <var>checker</var> &amp;optional <var>custom-args</var></em></dt>
<dd><p>Define <var>symbol</var> as option variable for a syntax <var>checker</var>, with
the given <var>initial-value</var>.
</p>
<p><var>symbol</var> is declared as customizable variable, buffer-local variable
using <code>defcustom</code>, to provide an option for the given syntax
<var>checker</var>.  <var>symbol</var> gets a comprehensive docstring, including a
reference to <var>checker</var>.
</p>
<p><var>custom-args</var> are forwarded to <code>defcustom</code>.  Declare the
customization type here.
</p>
<p>Use this macro together with the <code>option</code> cell in the command of a
syntax checker.
</p></dd></dl>

<hr>
<a name="Error-parsers"></a>
<div class="header">
<p>
Next: <a href="#Option-filters" accesskey="n" rel="next">Option filters</a>, Previous: <a href="#Declaration" accesskey="p" rel="previous">Declaration</a>, Up: <a href="#Extending" accesskey="u" rel="up">Extending</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Function-and-Variable-Index.html#Function-and-Variable-Index" title="Index" rel="index">Index</a>]</p>
</div>
<a name="Error-parsers-1"></a>
<h3 class="section">3.2 Error parsers</h3>

<p>Syntax checkers may use more sophisticated error parsing by using the
<code>:error-parser</code> property.  See <a href="#Declaration">Declaration</a>.
</p>
<p>Flycheck provides the following error parsers for use by syntax
checkers:
</p>
<dl compact="compact">
<dt><code>flycheck-parse-checkstyle</code></dt>
<dd><p>Parse XML output similar to <a href="http://checkstyle.sourceforge.net/">Checkstyle</a>.
</p></dd>
</dl>

<p>You may also define your own error parsers.  An error parser is a
function that takes three arguments:
</p>
<dl compact="compact">
<dt><var>output</var></dt>
<dd><p>The complete output of the syntax checker as string.
</p></dd>
<dt><var>checker</var></dt>
<dd><p>A symbol denoting the executed syntax checker.
</p></dd>
<dt><var>buffer</var></dt>
<dd><p>A buffer object referring to the buffer that was syntax-checked.
</p></dd>
</dl>

<p>The function shall return a list of Flycheck errors.  See <a href="API.html#Error-API">Error API</a>,
for more information about Flycheck errors.
</p>
<p>Flycheck provides some utility functions to implement error parsers.
See <a href="API.html#Error-parser-API">Error parser API</a>.
</p>
<hr>
<a name="Option-filters"></a>
<div class="header">
<p>
Next: <a href="#Examples" accesskey="n" rel="next">Examples</a>, Previous: <a href="#Error-parsers" accesskey="p" rel="previous">Error parsers</a>, Up: <a href="#Extending" accesskey="u" rel="up">Extending</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Function-and-Variable-Index.html#Function-and-Variable-Index" title="Index" rel="index">Index</a>]</p>
</div>
<a name="Option-filters-1"></a>
<h3 class="section">3.3 Option filters</h3>

<p>Flycheck provides the following built-in option filters for use with the
<code>option</code> cell:
</p>
<dl compact="compact">
<dt><code>flycheck-option-int</code></dt>
<dd><p>An integral option that handles <code>nil</code> correctly (unlike
<code>number-to-string</code>).
</p></dd>
</dl>

<hr>
<a name="Examples"></a>
<div class="header">
<p>
Previous: <a href="#Option-filters" accesskey="p" rel="previous">Option filters</a>, Up: <a href="#Extending" accesskey="u" rel="up">Extending</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Function-and-Variable-Index.html#Function-and-Variable-Index" title="Index" rel="index">Index</a>]</p>
</div>
<a name="Examples-of-syntax-checkers"></a>
<h3 class="section">3.4 Examples of syntax checkers</h3>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top">&bull; <a href="#Simple-example" accesskey="1">Simple example</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How to declare basic syntax checkers
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Predicate-example" accesskey="2">Predicate example</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How to control syntax checker usage
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Configuration-example" accesskey="3">Configuration example</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How to configure syntax checkers
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Chaining-example" accesskey="4">Chaining example</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How to execute more than one syntax checker
</td></tr>
</table>

<hr>
<a name="Simple-example"></a>
<div class="header">
<p>
Next: <a href="#Predicate-example" accesskey="n" rel="next">Predicate example</a>, Previous: <a href="#Examples" accesskey="p" rel="previous">Examples</a>, Up: <a href="#Examples" accesskey="u" rel="up">Examples</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Function-and-Variable-Index.html#Function-and-Variable-Index" title="Index" rel="index">Index</a>]</p>
</div>
<a name="Basic-syntax-checkers"></a>
<h4 class="subsection">3.4.1 Basic syntax checkers</h4>

<p>As explained in the previous chapter <a href="#Extending">Extending</a> a syntax checker is
declared with <code>flycheck-declare-checker</code>.
</p>
<p>We will use this function to declare a syntax checker using the
CodeSniffer utility for the PHP programming language:
</p>
<div class="lisp">
<pre class="lisp">(flycheck-declare-checker php-phpcs
  &quot;A PHP syntax checker using PHP_CodeSniffer.

See URL `http://pear.php.net/package/PHP_CodeSniffer/'.&quot;
  :command '(&quot;phpcs&quot; &quot;--report=checkstyle&quot; source)
  :error-parser 'flycheck-parse-checkstyle
  :modes '(php-mode php+-mode))
</pre></div>

<p>First we specify the <code>:command</code> to execute.  The first element of
the command list is the name of the executable, <code>phpcs</code> in our
case.  This command is checked for existence with <code>executable-find</code>
before using this syntax checker.  If the command does not exist, the
syntax checker is <em>not</em> used.
</p>
<p>The executable is following by the arguments, in this case some options
and the symbol <code>source</code>.  This symbol is replaced with the file to
check.  This file is a temporary file created in the system temporary
directory and containing the contents of the buffer to check.
</p>
<p>Next we specify how to parse the output of the syntax checker.  PHP
CodeSniffer provides an option to output errors in an XML format similar
to the Java tool Checkstyle, so we use the built-in <em>error parser</em>
<code>flycheck-parse-checkstyle</code> to parse the output.
</p>
<p>Eventually we enable the syntax checker in PHP editing modes.
</p>
<p>If the syntax checker does not provide any sort of structured output
format, we have to parse the error messages from the textual output.  To
do so, we can use <em>error patterns</em>, like in the Pylint syntax
checker for the Python programming language:
</p>
<div class="lisp">
<pre class="lisp">(flycheck-declare-checker python-pylint
  &quot;A Python syntax and style checker using the pylint utility.

See URL `http://pypi.python.org/pypi/pylint'.&quot;
  :command '(&quot;epylint&quot; source-inplace)
  :error-patterns
  '((&quot;^\\(?1:.*\\):\\(?2:[0-9]+\\): Warning (W.*): \\(?4:.*\\)$&quot; warning)
    (&quot;^\\(?1:.*\\):\\(?2:[0-9]+\\): Error (E.*): \\(?4:.*\\)$&quot; error)
    (&quot;^\\(?1:.*\\):\\(?2:[0-9]+\\): \\[F\\] \\(?4:.*\\)$&quot; error))
  :modes 'python-mode)
</pre></div>

<p>Again, there is a <code>:command</code>, however we use the
<code>source-inplace</code> symbol this time.  This symbol causes the
temporary file to be created in the same directory as the original file,
making information from the source code tree available to the syntax
checker.  In case of Pylint, these are the Python packages from the
source code tree.
</p>
<p>Next we give the list of <em>error patterns</em> to parse errors.  These
patterns extract the error location and the error message from the
output of <code>epylint</code>.  An error pattern is a list containing a
regular expression with match groups to extract the error information,
and an error level (either <code>warning</code> or <code>error</code>).
</p>
<p>Eventually we enable the syntax checker in <code>python-mode</code>.
</p>
<hr>
<a name="Predicate-example"></a>
<div class="header">
<p>
Next: <a href="#Configuration-example" accesskey="n" rel="next">Configuration example</a>, Previous: <a href="#Simple-example" accesskey="p" rel="previous">Simple example</a>, Up: <a href="#Examples" accesskey="u" rel="up">Examples</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Function-and-Variable-Index.html#Function-and-Variable-Index" title="Index" rel="index">Index</a>]</p>
</div>
<a name="Syntax-checkers-with-predicates"></a>
<h4 class="subsection">3.4.2 Syntax checkers with predicates</h4>

<p>In the previous examples the syntax checkers were specific to certain
major modes.  However, this is not always the case.  For instance, GNU
Emacs provides a single mode only for shell scripting in various Shell
languages.  A syntax checker for a specific shell must check whether the
edited shell script is written for the right shell:
</p>
<div class="lisp">
<pre class="lisp">(flycheck-declare-checker zsh
  &quot;A Zsh syntax checker using the zsh executable.

See URL `http://www.zsh.org/'.&quot;
  :command '(&quot;zsh&quot; &quot;-n&quot; &quot;-d&quot; &quot;-f&quot; source)
  :error-patterns '((&quot;^\\(?1:.*\\):\\(?2:[0-9]+\\): \\(?4:.*\\)$&quot; error))
  :modes 'sh-mode
  :predicate '(eq sh-shell 'zsh))
</pre></div>

<p>This syntax checker for the Zsh shell is enabled in <code>sh-mode</code> as
specified by <code>:modes</code>, however it specifies an additional
<code>:predicate</code> to determine whether the right shell is in use.  Hence
this syntax checker is only used if a Zsh shell scripting is being
edited in <code>sh-mode</code>, but not if a Bash or POSIX Shell script is
being edited.
</p>
<p>A syntax checker may even go as far as not having <code>:modes</code> at all.
For instance, there is no special JSON mode, but syntax checking JSON is
still desirable.  Hence a JSON syntax checker may use the
<code>:predicate</code> to check the file extension:
</p>
<div class="lisp">
<pre class="lisp">(flycheck-declare-checker json-jsonlint
  &quot;A JSON syntax and style checker using jsonlint.

See URL `https://github.com/zaach/jsonlint'.&quot;
  :command '(&quot;jsonlint&quot; &quot;-c&quot; &quot;-q&quot; source)
  :error-patterns
  '((&quot;^\\(?1:.+\\)\: line \\(?2:[0-9]+\\), col \\(?3:[0-9]+\\), \\(?4:.+\\)$&quot;
     error))
  :predicate '(and buffer-file-name
                   (string= &quot;json&quot; (file-name-extension buffer-file-name)))))
</pre></div>

<p>This syntax checker is now used whenever a file ends with .json,
regardless of the major mode.
</p>
<hr>
<a name="Configuration-example"></a>
<div class="header">
<p>
Next: <a href="#Chaining-example" accesskey="n" rel="next">Chaining example</a>, Previous: <a href="#Predicate-example" accesskey="p" rel="previous">Predicate example</a>, Up: <a href="#Examples" accesskey="u" rel="up">Examples</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Function-and-Variable-Index.html#Function-and-Variable-Index" title="Index" rel="index">Index</a>]</p>
</div>
<a name="Configuration-files-for-syntax-checkers"></a>
<h4 class="subsection">3.4.3 Configuration files for syntax checkers</h4>

<p>Some syntax checkers can be configured using configuration files given
by an option.  Flycheck provides built-in support to handle such
configuration files:
</p>
<div class="lisp">
<pre class="lisp">(flycheck-def-config-file-var flycheck-jshintrc javascript-jshint &quot;.jshintrc&quot;)

(flycheck-declare-checker javascript-jshint
  &quot;A JavaScript syntax and style checker using jshint.

See URL `http://www.jshint.com'.&quot;
  :command '(&quot;jshint&quot; &quot;--checkstyle-reporter&quot;
             (config-file &quot;--config&quot; flycheck-jshintrc) source)
  :error-parser 'flycheck-parse-checkstyle
  :modes '(js-mode js2-mode js3-mode))
</pre></div>

<p>As you can see, we declare a syntax checker for Javascript, using the
<code>jshint</code> utility.  This utility accepts a configuration file via
the <samp>--config</samp> option.
</p>
<p>To use a configuration file with jshint, we first declare the variable
<code>flycheck-jshintrc</code> that provides the name of the file, as
explained in <a href="Usage.html#Configuration">Configuration</a>.
</p>
<p>In the <code>:command</code> we use a <code>config-file</code> element to pass the
configuration file to the syntax checker.  If the configuration file is
found, its path will be passed to the syntax checker, using the option
specified after the <code>config-file</code> symbol.  Otherwise the whole
element is simply omitted from the command line.
</p>
<p>Some Syntax checkers can also be configured using options passed on the
command line.  Flycheck supports this case, too.  We will use this
facility to extend the PHP CodeSniffer syntax checker from the
<a href="#Simple-example">Simple example</a> with support for coding standards:
</p>
<div class="lisp">
<pre class="lisp">(flycheck-def-option-var flycheck-phpcs-standard nil phpcs
  &quot;The coding standard for PHP CodeSniffer.&quot;
  :type '(choice (const :tag &quot;Default standard&quot; nil)
                 (string :tag &quot;Standard name&quot; nil)))
(put 'flycheck-phpcs-standard 'safe-local-variable #'stringp)

(flycheck-declare-checker php-phpcs
  &quot;A PHP syntax checker using PHP_CodeSniffer.&quot;
  :command '(&quot;phpcs&quot; &quot;--report=checkstyle&quot;
             (option &quot;--standard=&quot; flycheck-phpcs-standard)
             source)
  :error-parser 'flycheck-parse-checkstyle
  :modes '(php-mode php+-mode))
</pre></div>

<p>The syntax checker is pretty much the same as before, except that a new
element was added to <code>:command</code>.  This element passes the value of
the new option variable <code>flycheck-phpcs-standard</code> to the syntax
checker.  This variable is declared with the special macro
<code>flycheck-def-option-var</code> at the beginning.
</p>

<hr>
<a name="Chaining-example"></a>
<div class="header">
<p>
Previous: <a href="#Configuration-example" accesskey="p" rel="previous">Configuration example</a>, Up: <a href="#Examples" accesskey="u" rel="up">Examples</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Function-and-Variable-Index.html#Function-and-Variable-Index" title="Index" rel="index">Index</a>]</p>
</div>
<a name="Chaining-syntax-checkers"></a>
<h4 class="subsection">3.4.4 Chaining syntax checkers</h4>

<p>For many languages, more than a single syntax checker is applicable.
For instance, Emacs Lisp can be checked for syntactic corrections with
the byte code compiler, and for adherence to the Emacs Lisp
documentation style using Checkdoc.  PHP, too, can be syntax checked
with the PHP parser, and verified against coding styles using PHP
CodeSniffer.
</p>
<p>To support such cases, syntax checkers can be <em>chained</em> using the
<code>:next-checkers</code>.  The standard PHP syntax checker uses this to
run PHP CodeSniffer if there are no syntax errors:
</p>
<div class="lisp">
<pre class="lisp">(flycheck-declare-checker php
  &quot;A PHP syntax checker using the PHP command line.

See URL `http://php.net/manual/en/features.commandline.php'.&quot;
  :command '(&quot;php&quot; &quot;-l&quot; &quot;-d&quot; &quot;error_reporting=E_ALL&quot; &quot;-d&quot; &quot;display_errors=1&quot;
             &quot;-d&quot; &quot;log_errors=0&quot; source)
  :error-patterns
  '((&quot;\\(?:Parse\\|Fatal\\|syntax\\) error[:,] \\(?4:.*\\) in \\(?1:.*\\) on line \\(?2:[0-9]+\\)&quot;
    error))
  :modes '(php-mode php+-mode)
  :next-checkers '((warnings-only . php-phpcs)))
</pre></div>

<p>Now PHP CodeSniffer will check the coding style, whenever a PHP syntax
check did not result in any errors, if PHP CodeSniffer syntax checker is
usable <em>and</em> registered.
</p>

<hr>
<div class="header">
<p>
Previous: <a href="#Configuration-example" accesskey="p" rel="previous">Configuration example</a>, Up: <a href="#Examples" accesskey="u" rel="up">Examples</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Function-and-Variable-Index.html#Function-and-Variable-Index" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
